{% extends "base.html" %}

{% block content %}
<div class="container">
    <header class="header">
        <div class="banner-container">
            <img src="https://raw.githubusercontent.com/etzr/img/738cce8236aab20e03b38a54eaa0903e9045a23a/group%20of%20people.png" alt="Banner" class="banner-image">
        </div>
        <h1 class="title">Salary Calculator</h1>
    </header>

    <div class="introduction">
        <p>Welcome to our comprehensive Salary Calculator. This tool helps you estimate your take-home pay and understand your tax obligations in China, Singapore, and the United States. Simply select your country, input your salary details, and get a detailed breakdown of your income, taxes, and benefits. Whether you're planning a career move, negotiating a new contract, or just curious about your finances, our calculator provides valuable insights tailored to your specific situation.</p>
        <p>Please note: This calculator provides estimates based on general tax rules and may not account for all individual circumstances. For personalized financial advice, please consult with a qualified tax professional.</p>
    </div>
    
    <form id="tax-form">
        <div class="form-group">
            <label for="country">Country:</label>
            <select id="country" name="country" required>
                <option value="">Select Country</option>
            </select>
        </div>

        <div class="form-group">
            <label for="tax-year">Tax Year:</label>
            <select id="tax-year" name="tax-year" required>
                <option value="">Select Tax Year</option>
            </select>
        </div>

        <div class="form-group">
            <label for="residency-status">Residency Status:</label>
            <select id="residency-status" name="residency-status" required>
                <option value="resident">Resident</option>
                <option value="non-resident">Non-Resident</option>
            </select>
        </div>
        
        <div id="state-container" class="form-group" style="display: none;">
            <label for="state">State/Province:</label>
            <select id="state" name="state">
                <option value="">Select State/Province</option>
            </select>
        </div>

        <div id="city-container" class="form-group" style="display: none;">
            <label for="city">City:</label>
            <select id="city" name="city">
                <option value="">Select City</option>
            </select>
        </div>

        <div class="form-group">
            <label for="income">Annual Income:</label>
            <div id="salary-distribution-container">
                <canvas id="salary-distribution-chart"></canvas>
            </div>
            <input type="number" id="income" name="income" placeholder="Enter your annual income" required>
        </div>
        
        <!-- COUNTRY SPECIFIC FIELDS HERE -->
        <div id="singapore-fields" class="country-specific-fields" style="display: none;">
            <h3>Singapore Specific Information</h3>
            <div class="form-group">
                <label for="age">Age:</label>
                <input type="number" id="age" name="age" min="0" max="120" placeholder="Enter your age">
            </div>
        </div>

        <div id="us-fields" class="country-specific-fields">
            <h3>401(k) Information</h3>
            <div class="form-group">
                <label for="401k-contribution">Employee 401(k) Contribution (%):</label>
                <input type="number" id="401k-contribution" name="401k-contribution" 
                       min="0" max="100" step="0.1" placeholder="0.0" value="6.0"
                       title="Enter a percentage between 0 and 100">
            </div>
            <div class="form-group">
                <label for="employer-match">Employer 401(k) Match (%):</label>
                <input type="number" id="employer-match" name="employer-match" 
                       min="0" max="100" step="0.1" placeholder="0.0" value="3.0"
                       title="Enter a percentage between 0 and 100">
            </div>
            <div class="form-group">
                <label for="employer-match-limit">Employer Match Limit (%):</label>
                <input type="number" id="employer-match-limit" name="employer-match-limit" 
                       min="0" max="100" step="0.1" placeholder="0.0" value="50.0"
                       title="Enter a percentage between 0 and 100">
            </div>
        </div>

        <div id="china-fields" class="country-specific-fields" style="display: none;">
            <h3>China Specific Information</h3>
            <!-- Currently, we don't have any specific fields for China, but we can add them here if needed in the future -->
        </div>

        <button type="submit" class="btn-calculate">Calculate</button>
    </form>

    <!-- RESULTS HERE -->
    <div id="result" class="result-container"></div>

    <div id="charts-container" class="charts-container" style="display: none;">
        <div class="chart-wrapper">
            <canvas id="breakdown-chart" height="400"></canvas>
        </div>
        <div class="chart-wrapper">
            <canvas id="additional-compensation-chart" height="400"></canvas>
        </div>
    </div>
</div>

{% endblock %}